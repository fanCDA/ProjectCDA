<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   xmlns:customize="pl.cdaction.view.panel.customize.*"
					   applicationComplete="init(event)"
					   windowResize="onWindowResize(event)">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.events.FlexNativeWindowBoundsEvent;
			
			import pl.cdaction.view.customizable.ICustomizable;
			import pl.cdaction.view.grid.GridView;
			
			
			
			private var _gridView : GridView;
			
			
			protected function init(event : FlexEvent) : void
			{
				trace("[ProjectCDA.mxml] INIT");
				
				_gridView = new GridView();
				mainContainer.addChild(_gridView);
				
				_gridView.sigCustomizeMe.add( handleSigCustomizeMe );
			}
			
			private function addGridObject() : void
			{
				_gridView.addNew();
			}
			
			private function handleSigCustomizeMe(item : ICustomizable) : void
			{
				customizePanel.registerObjToCustomize(item);
			}
			
			
			private function onWindowResize(event : FlexNativeWindowBoundsEvent) : void
			{
				if(_gridView)
					_gridView.handleResize();
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<s:VGroup width="100%">
		<s:Button label="Add Grid Object" click="addGridObject()" />
		<customize:CustomizePanel id="customizePanel" />
		<mx:UIComponent id="mainContainer" />
	</s:VGroup>
</s:WindowedApplication>
